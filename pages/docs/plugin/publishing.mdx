# Publishing plugins

If you prefer reading codes, you can refer to [the repository for official plugins](https://github.com/swc-project/plugins).

## Building a plugin as a wasm

You can run your plugin as a wasm file by running

```sh
cargo prepublish --release
```

It will create `target/wasm32-wasi/release/your_plugin_name.wasm`

## Creating a npm package for plugin

You can build the required wasm file by using `cargo build`.

```sh


cargo prepublish --release --target wasm32-wasi
# or if you want to use wasm32-unknown-unknown instead of wasm32-wasi
cargo build --release --target wasm32-unknown-unknown

```

## Configuring CI pipeline

## Adjusting configuration for smaller binary

You can reduce the size of the plugin by configuring cargo.

In your `Cargo.toml` file, you can add the following lines.

```toml
[profile.release]
# This removes more dead code
codegen-units = 1
lto = true
# Optimize for size
opt-level = "s"
```

## Improving performance

### Removing log for release mode

If logging of yout crate is too much, you can remove it by enabling `release_max_level_*` of `tracing`, like

```toml
traicing = { version="0.1", features = ["release_max_level_info"] }
```
